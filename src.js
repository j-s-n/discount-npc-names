const lists = {
  "names": [
    "Wet William",
    "Blaster Keaton",
    "Butch Sunbeams",
    "Billions Thaumaturgy",
    "Sylvan Seawater",
    "Sisyphus Saturnine",
    "Wilimander Plause",
    "Peace Finally",
    "Pillbug Balboa",
    "Steve Countersteve",
    "Margot Bookbinder Milkman",
    "Calamitous Nightmother",
    "Halstane Flek",
    "Whitney Dustgate",
    "Thiccums Juggalette",
    "Garbanzo Dean",
    "Quadriceps Godzilla",
    "Yottachad Cranewife",
    "Geodesic Dave",
    "Robert Yaga",
    "Anti-Todd",
    "Immolation Sphere",
    "Shepherd's Silloutte",
    "Wrecker Philadelphia",
    "Twelve Thousand Dollars",
    "Hot Tub Time Machine",
    "California Time Dilation",
    "Navy Railgun",
    "Lawrence Marrowthief",
    "Lexicographica Milktooth",
    "Harcourt Horsewater",
    "Omenifus Soup",
    "Alabaster Weavesnatch",
    "Ichabod Pelican",
    "Cannonball Chidi",
    "Dilkus Redhook",
    "Terwilliger \"Youtube\" Terwilliger",
    "Low Key The Baba Yaga",
    "Game Five",
    "Hope Springs Eternal",
    "Hotboxed Miata",
    "Marfideldus Plane",
    "New Rose Milk Hotel",
    "Dan Quayleman",
    "Laguna Todd",
    "Slain Hawthorne",
    "Hot Diggity",
    "Brutallion Dogthief",
    "Gilligan Roosevelt Troubadour Troutman",
    "Pidgeonmade Moon",
    "Hooligan Oof",
    "Wilmot Witchfinder",
    "Nosebleed Seats",
    "Milkworms Milkworms",
    "Honest Dirtprince",
    "Dale of the Great Plains",
    "Great Granite Spire",
    "Cousin Doomrider",
    "Perihelia Griefhaven",
    "Son Pyramid",
    "Lone Argonaut",
    "Regular-Sized Edward Cannon",
    "Boo Gamecube",
    "Pegg Legg",
    "Reverend Hooligan",
    "Booker T V",
    "Slim Harmonics",
    "Graviton Bomb Delloitte",
    "Harmonica Blackpine",
    "Sweat Equity",
    "Paris-By-Way-Of-Detroit",
    "Cassiopeia Halifax",
    "Andromedes Fiveiron",
    "Haunted Summer",
    "Drunks Baldwin",
    "Broccoli Pubchatter",
    "Ganymede Processional",
    "Dule Tunguska",
    "Obstinacy of the Dispossessed",
    "Mortal Axis",
    "Orbital Dunkleader",
    "Ten Years Buried",
    "Judas Dafodillionare",
    "Raekwon Quake",
    "Polyhed'Ron Whelm",
    "Eigen-Victor Loop",
    "Horatio Beefweapon",
    "Hypatia Sunstruck",
    "Allegory of the Moon-Posessed",
    "Olifant Crocodil",
    "Harmonious Chordata",
    "Irascible Tom",
    "Oliver Notionsbane",
    "Saxophone Nightmare II",
    "Nightingale Switchblade-Pettigrew",
    "Jupiter Swordlogic",
    "Wormweather Tapestry",
    "Biblical Omaha",
    "Seance Swanvigil",
    "Wasp-Eater Oligarch",
    "Never Dare Hope",
    "Godforsaken Lizard",
    "Obelisk Ikegami",
    "Toledo Octagon",
    "Ransommelier Dunkirk",
    "Branson Bouchard",
    "Ommegang Proboscuttio",
    "Antigone Owlfather",
    "Nope Hogan",
    "Fatima Duckworth",
    "Olivander Timecop",
    "Dawn Dialectics",
    "Pygmalionite Oak",
    "Dilligan Golfclap",
    "Philomena Mooncop",
    "Telomere Applegate",
    "Tallahassee Hallelujah",
    "Dawnwrought Yeet",
    "Mahogany Thoughtcrime",
    "Orpheus Sleep",
    "Delver Goonboggle",
    "Dogs: Ohayo",
    "Autumn Toothkeeper",
    "Plausible Maud",
    "Ampersands Often",
    "Guxue Lightrider",
    "Peoria Burgergun",
    "Big Yikes",
    "Jikes Runewelder",
    "Mood Enough",
    "Thwartlance Bloodrot",
    "Reverse Tracheotomy Tuesday",
    "Dichotomous Wife-Energy",
    "Gourdhampton Tubewallop",
    "Incontrovertible Kill-Field",
    "Relative Designator",
    "Irreversable Flex",
    "Cherenkov Stutterglow",
    "E.M. Skipglider",
    "\"Unsinkable\" Radio Esposito",
    "Reversible Junebug",
    "Proprietous Oscar",
    "Entropic Tidecatcher",
    "Doubledoug Meerkat",
    "Daring Scopecrawler",
    "Maximum Horkheimer",
    "Median Headroom",
    "Loper Wave-Motion",
    "Distant Action",
    "Radar Skipjacker",
    "Liliput Erstwhile",
    "Mothra Doubledown",
    "Minsk Occultant",
    "Doomed Rhymeweaver",
    "Marine Okemba",
    "Subtextual Emile",
    "Bathos Pathos",
    "Baphometa Rashid",
    "Small Emperor Moth",
    "Saturnia Inkwell",
    "Pavel Timeheist",
    "Lepidoptera Poppycock",
    "Motheaten Dynasty",
    "Echopraxia Wallander",
    "Lattitude of Aplasia",
    "Leopold Imbroglio"
  ],

  stats: [
    "Strength",
    "Wisdom",
    "Intelligence",
    "Charisma",
    "Dexterity",
    "Constitution",
    "Stamina",
    "Chirality",
    "Constitutionality",
    "Mass",
    "IQ",
    "Muscles",
    "EQ",
    "Dogs",
    "Vertical Leap",
    "Toes",
    "Police Evasion Modifier",
    "Gravitas",
    "Points",
    "Gold",
    "Friends",
    "Remaining Lives",
    "Bone Density",
    "Recalcitrance",
    "Gender",
    "Shoe Size",
    "Average Speed",
    "Mice",
    "Talent",
    "Attentiveness",
    "Bell Peppers",
    "Humility",
    "Credit Score",
    "Bones",
    "Birth Weight",
    "Surplus Value",
    "Teeth",
    "Flux Capacity",
    "Cool",
    "Edge",
    "pH",
    "Length",
    "Kills",
    "Drag Coefficient",
    "Vibes",
    "Guns",
    "Knives",
    "Swords",
    "Bats",
    "Crime",
    "Justice",
    "Time",
    "DPS",
    "Tables",
    "Pulchritude",
    "Power",
    "Strength (inner)",
    "Opulence",
    "Luck",
    "Dad Energy",
    "Thiccness",
    "Decisiveness",
    "Japery",
    "Questions",
    "Defense",
    "Legs",
    "War",
    "Miscellaneous",
    "Rank",
    "Distinguishable Moms",
    "Eyes",
    "Experiences",
    "Dreams",
    "Modesty",
    "Guilt",
    "Boats Destroyed",
    "Audacity",
    "Cumulative Upkeep"
  ]
};

const VERSION = "3";

if (window.localStorage.getItem("version") !== VERSION) {
  window.localStorage.setItem("version", VERSION);
  window.localStorage.setItem("names", "[]");
  window.localStorage.setItem("stats", "[]");
}

function generator (key) {
  let list = lists[key];
  let remaining = JSON.parse(window.localStorage.getItem(key));
  return () => {
    if (remaining.length === 0) {
      remaining = shuffle(list);
    }
    let result = remaining.pop();
    window.localStorage.setItem(key, JSON.stringify(remaining));
    return result;
  };
}

const nextName = generator("names");
const nextStat = generator("stats");

function fill (id, field, value) {
  document.getElementById(`NPC-${id}-${field}`).innerHTML = value;
}

function randStat () {
  return Math.floor(Math.random() * (20)) + 1;
}

function generateNPC (id) {
  fill(id, "name", nextName());
  fill(id, "stat-1", nextStat() + ":");
  fill(id, "stat-1-value", randStat());
  fill(id, "stat-2", nextStat() + ":");
  fill(id, "stat-2-value", randStat());
  fill(id, "stat-3", nextStat() + ":");
  fill(id, "stat-3-value", randStat());
  fill(id, "stat-4", nextStat() + ":");
  fill(id, "stat-4-value", randStat());
  fill(id, "stat-5", nextStat() + ":");
  fill(id, "stat-5-value", randStat());
}


function generateNPCs () {
  generateNPC("1");
  generateNPC("2");
  generateNPC("3");
}

function shuffle (array) {
  let result = array.slice();
  for (let i = result.length - 1; i > 0; i--) {
    let swapIndex = Math.floor(Math.random() * (i + 1));
    let temp = result[i];
    result[i] = result[swapIndex];
    result[swapIndex] = temp;
  }

  return result;
}

document.getElementById("next-button").onclick = generateNPCs;

generateNPCs();